---
import BaseLayout from "../layouts/BaseLayout.astro";
import HeroHeader from "../components/HeroHeader.astro";
import bg from "../assets/img/contact-bg.jpg";

const BASE = import.meta.env.BASE_URL || '/';
---

<BaseLayout
  title="洛穹偎的一家言 - 联系方式"
  description="想与我联系？欢迎通过表单或社交账号留言。"
  background={bg}
>
  <HeroHeader
    title="Contact Me"
    subtitle="Have questions? I MAY have answers."
    background={bg}
  />

  <main class="mb-4">
    <div class="container px-4 px-lg-5">
      <div class="row gx-4 gx-lg-5 justify-content-center">
        <div class="col-md-10 col-lg-8 col-xl-7">
          <p>
            Fill out the form below to send me a message and I MAY get back to you as soon as possible!
          </p>
          <div class="my-5">
            <form id="contactForm" data-sb-form-api-token="API_TOKEN">
              <!-- Name -->
              <div class="form-floating">
                <input class="form-control" id="name" type="text" placeholder="Enter your name..." data-sb-validations="required" />
                <label for="name">Name</label>
                <div class="invalid-feedback" data-sb-feedback="name:required">
                  A name is required.
                </div>
              </div>

              <!-- Email -->
              <div class="form-floating">
                <input class="form-control" id="email" type="email" placeholder="Enter your email..." data-sb-validations="required,email" />
                <label for="email">Email address</label>
                <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
              </div>

              <!-- Phone -->
              <div class="form-floating">
                <input class="form-control" id="phone" type="tel" placeholder="Enter your phone number..." data-sb-validations="required" />
                <label for="phone">Phone Number</label>
                <div class="invalid-feedback" data-sb-feedback="phone:required">
                  A phone number is required.
                </div>
              </div>

              <!-- Message -->
              <div class="form-floating">
                <textarea
                  class="form-control"
                  id="message"
                  placeholder="Enter your message here..."
                  style="height: 12rem"
                  data-sb-validations="required"
                ></textarea>
                <label for="message">Message</label>
                <div class="invalid-feedback" data-sb-feedback="message:required">
                  A message is required.
                </div>
              </div>

              <br />

              <!-- Success message -->
              <div class="d-none" id="submitSuccessMessage">
                <div class="text-center mb-3">
                  <div class="fw-bolder">Form submission successful!</div>
                  骗你的，我根本收不到这份表单。也许你可以尝试通过下方我的 B 站账号来联系我。
                </div>
              </div>

              <!-- Error message -->
              <div class="d-none" id="submitErrorMessage">
                <div class="text-center text-danger mb-3">Error sending message!</div>
              </div>

              <!-- Submit Button -->
              <button class="btn btn-primary text-uppercase disabled" id="submitButton" type="submit">
                Send
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- ✅ 保留 SB Forms 脚本和 Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" is:inline></script>
  <script src={`${BASE}js/scripts.js`} is:inline></script>
  <script src="https://cdn.startbootstrap.com/sb-forms-latest.js" is:inline></script>
</BaseLayout>
